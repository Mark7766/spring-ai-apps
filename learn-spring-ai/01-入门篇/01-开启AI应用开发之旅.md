# ç¬¬1æœŸï¼šSpring AI å¼€å¯ä½ çš„AIåº”ç”¨å¼€å‘ä¹‹æ—…

## ğŸ“Œ æœ¬æœŸæ¦‚è¿°

**æ ¸å¿ƒé—®é¢˜ï¼šå¦‚ä½•å¿«é€Ÿæ­å»ºç¬¬ä¸€ä¸ªSpring AIèŠå¤©åº”ç”¨ï¼Ÿ**

åœ¨è¿™ä¸€æœŸä¸­ï¼Œæˆ‘ä»¬å°†ä»é›¶å¼€å§‹ï¼Œæ­å»ºä½ çš„ç¬¬ä¸€ä¸ªSpring AIåº”ç”¨ã€‚é€šè¿‡å®æˆ˜DeepSeekèŠå¤©åº”ç”¨ï¼Œä½ å°†æŒæ¡Spring AIçš„æ ¸å¿ƒæ¦‚å¿µã€å¼€å‘ç¯å¢ƒé…ç½®ï¼Œä»¥åŠå¦‚ä½•å¤„ç†å¸¸è§çš„ä¾èµ–å†²çªé—®é¢˜ã€‚

## ğŸ¯ å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬æœŸå­¦ä¹ åï¼Œä½ å°†èƒ½å¤Ÿï¼š
- âœ… ç†è§£Spring AIçš„æ ¸å¿ƒæ¦‚å¿µå’Œæ¶æ„
- âœ… æ­å»ºå®Œæ•´çš„Spring AIå¼€å‘ç¯å¢ƒ
- âœ… å®ç°ä¸€ä¸ªå¯è¿è¡Œçš„AIå¯¹è¯åº”ç”¨
- âœ… æŒæ¡APIå¯†é’¥é…ç½®çš„æœ€ä½³å®è·µ
- âœ… è§£å†³å¸¸è§çš„Mavenä¾èµ–å†²çªé—®é¢˜

## ğŸ“š å†…å®¹å¤§çº²

### 1. Spring AIæ˜¯ä»€ä¹ˆï¼Ÿ

### 2. ä¸ºä»€ä¹ˆé€‰æ‹©Spring AIï¼Ÿ

### 3. Spring AIæ ¸å¿ƒæ¶æ„

### 4. å¼€å‘ç¯å¢ƒæ­å»º

### 5. å®æˆ˜ï¼šåŸºäºDeepSeekçš„èŠå¤©åº”ç”¨

### 6. APIå¯†é’¥é…ç½®ä¸å®‰å…¨

### 7. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

---

## 1. Spring AIæ˜¯ä»€ä¹ˆï¼Ÿ

**Spring AI** æ˜¯Springç”Ÿæ€ç³»ç»Ÿä¸­ä¸“é—¨ç”¨äºAIåº”ç”¨å¼€å‘çš„æ¡†æ¶ï¼Œå®ƒä¸ºå¼€å‘è€…æä¾›äº†ä¸€å¥—ç»Ÿä¸€çš„æŠ½è±¡æ¥å£ï¼Œè®©ä½ å¯ä»¥è½»æ¾é›†æˆå„ç§å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æœåŠ¡ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ”Œ **ç»Ÿä¸€çš„APIæŠ½è±¡**ï¼šæ— è®ºä½¿ç”¨OpenAIã€Azureã€DeepSeekè¿˜æ˜¯æœ¬åœ°æ¨¡å‹ï¼Œä»£ç æ¥å£ä¿æŒä¸€è‡´
- ğŸš€ **å¼€ç®±å³ç”¨**ï¼šåŸºäºSpring Bootçš„è‡ªåŠ¨é…ç½®ï¼Œæœ€å°åŒ–é…ç½®ä»£ç 
- ğŸ”„ **çµæ´»åˆ‡æ¢**ï¼šå¯ä»¥è½»æ¾åœ¨ä¸åŒçš„AIæœåŠ¡æä¾›å•†ä¹‹é—´åˆ‡æ¢
- ğŸ› ï¸ **ä¼ä¸šçº§ç‰¹æ€§**ï¼šå†…ç½®é‡è¯•ã€é™æµã€ç›‘æ§ç­‰ç”Ÿäº§ç¯å¢ƒå¿…å¤‡åŠŸèƒ½
- ğŸ“¦ **ä¸°å¯Œçš„ç”Ÿæ€**ï¼šæ”¯æŒå‘é‡æ•°æ®åº“ã€Embeddingã€RAGç­‰é«˜çº§åŠŸèƒ½

### Spring AI vs ç›´æ¥è°ƒç”¨API

| å¯¹æ¯”ç»´åº¦ | ç›´æ¥è°ƒç”¨API | Spring AI |
|---------|------------|-----------|
| **å­¦ä¹ æˆæœ¬** | éœ€è¦å­¦ä¹ æ¯ä¸ªAIæœåŠ¡çš„SDK | ç»Ÿä¸€æ¥å£ï¼Œä¸€æ¬¡å­¦ä¹  |
| **ä»£ç ç»´æŠ¤** | åˆ‡æ¢æœåŠ¡éœ€è¦é‡å†™ä»£ç  | åªéœ€ä¿®æ”¹é…ç½® |
| **ä¼ä¸šç‰¹æ€§** | éœ€è¦è‡ªå·±å®ç° | å¼€ç®±å³ç”¨ |
| **Springé›†æˆ** | éœ€è¦æ‰‹åŠ¨é›†æˆ | åŸç”Ÿæ”¯æŒ |

---

## 2. ä¸ºä»€ä¹ˆé€‰æ‹©Spring AIï¼Ÿ

### åœºæ™¯1ï¼šé¿å…ä¾›åº”å•†é”å®š

å‡è®¾ä½ çš„åº”ç”¨å¼€å§‹ä½¿ç”¨OpenAIï¼Œä½†åæ¥å› ä¸ºæˆæœ¬æˆ–æ”¿ç­–åŸå› éœ€è¦åˆ‡æ¢åˆ°DeepSeekã€‚ä½¿ç”¨Spring AIï¼Œä½ åªéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä¸šåŠ¡ä»£ç æ— éœ€æ”¹åŠ¨ï¼

### åœºæ™¯2ï¼šä¼ä¸šçº§åº”ç”¨éœ€æ±‚

Spring AIæä¾›äº†ç”Ÿäº§ç¯å¢ƒå¿…å¤‡çš„ç‰¹æ€§ï¼š
- âœ… è¯·æ±‚é‡è¯•æœºåˆ¶
- âœ… è°ƒç”¨é™æµæ§åˆ¶
- âœ… å®Œå–„çš„ç›‘æ§æŒ‡æ ‡
- âœ… Spring Securityé›†æˆ

### åœºæ™¯3ï¼šå¿«é€ŸåŸå‹å¼€å‘

åŸºäºSpring Bootçš„è‡ªåŠ¨é…ç½®ï¼Œä½ å¯ä»¥ç”¨ä¸åˆ°50è¡Œä»£ç å®ç°ä¸€ä¸ªå®Œæ•´çš„AIå¯¹è¯åº”ç”¨ã€‚

---

## 3. Spring AIæ ¸å¿ƒæ¶æ„

### æ¶æ„å±‚æ¬¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      åº”ç”¨å±‚ (Your Application)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Spring AI Core (ç»Ÿä¸€æŠ½è±¡æ¥å£)      â”‚
â”‚  - ChatModel                         â”‚
â”‚  - EmbeddingModel                    â”‚
â”‚  - ImageModel                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Model Adapters (æ¨¡å‹é€‚é…å™¨)      â”‚
â”‚  - OpenAI  - Azure  - Ollama        â”‚
â”‚  - DeepSeek - Claude - ...          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      AI Service Providers           â”‚
â”‚  (å…·ä½“çš„AIæœåŠ¡æä¾›å•†)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ¥å£

**ChatModel** - å¯¹è¯æ¨¡å‹æ¥å£
```java
public interface ChatModel {
    String call(String message);
    ChatResponse call(Prompt prompt);
}
```

è¿™ä¸ªç®€æ´çš„æ¥å£éšè—äº†åº•å±‚å¤æ‚æ€§ï¼Œè®©ä½ ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ã€‚

---

## 4. å¼€å‘ç¯å¢ƒæ­å»º

### 4.1 ç¯å¢ƒè¦æ±‚

- â˜• **JDK 17+**ï¼ˆæ¨èJDK 21ï¼‰
- ğŸ”¨ **Maven 3.6+** æˆ– Gradle 7.0+
- ğŸ’» **IDE**ï¼šIntelliJ IDEAï¼ˆæ¨èï¼‰æˆ– Eclipse
- ğŸŒ **ç½‘ç»œ**ï¼šèƒ½è®¿é—®DeepSeek API

### 4.2 éªŒè¯ç¯å¢ƒ

```bash
# æ£€æŸ¥Javaç‰ˆæœ¬
java -version
# åº”è¯¥æ˜¾ç¤ºï¼šjava version "17.x.x" æˆ–æ›´é«˜

# æ£€æŸ¥Mavenç‰ˆæœ¬
mvn -version
# åº”è¯¥æ˜¾ç¤ºï¼šApache Maven 3.6.x æˆ–æ›´é«˜
```

### 4.3 è·å–DeepSeek APIå¯†é’¥

1. è®¿é—® [DeepSeekå¼€æ”¾å¹³å°](https://platform.deepseek.com/)
2. æ³¨å†Œå¹¶ç™»å½•è´¦å·
3. åœ¨æ§åˆ¶å°åˆ›å»ºAPIå¯†é’¥
4. ä¿å­˜å¯†é’¥ï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼ï¼‰

ğŸ’¡ **æç¤º**ï¼šDeepSeekæä¾›å…è´¹é¢åº¦ï¼Œéå¸¸é€‚åˆå­¦ä¹ å’Œæµ‹è¯•ã€‚

---

## 5. å®æˆ˜ï¼šåŸºäºDeepSeekçš„èŠå¤©åº”ç”¨

ç°åœ¨æˆ‘ä»¬ä»é›¶å¼€å§‹ï¼Œæ­å»ºä¸€ä¸ªå®Œæ•´çš„AIèŠå¤©åº”ç”¨ï¼é¡¹ç›®ä»£ç ä½äºï¼š`chat-deepseek`

### 5.1 åˆ›å»ºSpring Booté¡¹ç›®

#### æ–¹å¼1ï¼šä½¿ç”¨Spring Initializrï¼ˆæ¨èï¼‰

1. è®¿é—® https://start.spring.io/
2. é…ç½®é¡¹ç›®å‚æ•°ï¼š
   - **Project**: Maven
   - **Language**: Java
   - **Spring Boot**: 3.5.4
   - **Group**: com.sandy
   - **Artifact**: chat-deepseek
   - **Java**: 17

3. æ·»åŠ ä¾èµ–ï¼ˆDependenciesï¼‰ï¼š
   - Spring Web
   - Thymeleaf

4. ç‚¹å‡» **Generate** ä¸‹è½½é¡¹ç›®

#### æ–¹å¼2ï¼šå…‹éš†ç¤ºä¾‹é¡¹ç›®

```bash
git clone https://github.com/your-repo/spring-ai-apps.git
cd spring-ai-apps/chat-deepseek
```

### 5.2 é…ç½®Mavenä¾èµ–

æ‰“å¼€ `pom.xml`ï¼Œé…ç½®Spring AIä¾èµ–ï¼š

```xml
<!-- æ¥è‡ªï¼šchat-deepseek/pom.xml -->
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0">
    <modelVersion>4.0.0</modelVersion>
    
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>3.5.4</version>
    </parent>
    
    <groupId>com.sandy</groupId>
    <artifactId>chat-deepseek</artifactId>
    <version>0.0.2-SNAPSHOT</version>
    
    <properties>
        <java.version>17</java.version>
        <spring-ai.version>1.0.0</spring-ai.version>
    </properties>
    
    <dependencies>
        <!-- Spring AI OpenAI Starter (å…¼å®¹DeepSeek) -->
        <dependency>
            <groupId>org.springframework.ai</groupId>
            <artifactId>spring-ai-starter-model-openai</artifactId>
        </dependency>
        
        <!-- Spring Boot Web -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        
        <!-- Thymeleafæ¨¡æ¿å¼•æ“ -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-thymeleaf</artifactId>
        </dependency>
    </dependencies>
    
    <!-- Spring AIç‰ˆæœ¬ç®¡ç† -->
    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.springframework.ai</groupId>
                <artifactId>spring-ai-bom</artifactId>
                <version>${spring-ai.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
        </dependencies>
    </dependencyManagement>
</project>
```

**å…³é”®ç‚¹è§£é‡Š**ï¼š

1. **spring-ai-starter-model-openai**ï¼šSpring AIçš„OpenAIé€‚é…å™¨ï¼ŒDeepSeekå…¼å®¹OpenAIæ¥å£
2. **spring-ai-bom**ï¼šç»Ÿä¸€ç®¡ç†Spring AIç›¸å…³ä¾èµ–ç‰ˆæœ¬ï¼Œé¿å…å†²çª
3. **ç‰ˆæœ¬é”å®š**ï¼šä½¿ç”¨`<dependencyManagement>`ç¡®ä¿ç‰ˆæœ¬ä¸€è‡´æ€§

### 5.3 é…ç½®åº”ç”¨

åˆ›å»º `src/main/resources/application.yml`ï¼š

```yaml
# æ¥è‡ªï¼šchat-deepseek/src/main/resources/application.yml
server:
  port: 8081  # åº”ç”¨è¿è¡Œç«¯å£

spring:
  application:
    name: "chat-deepseek"
  
  thymeleaf:
    cache: false  # å¼€å‘ç¯å¢ƒå…³é—­ç¼“å­˜ï¼Œæ–¹ä¾¿è°ƒè¯•
  
  ai:
    openai:
      # ä½¿ç”¨ç¯å¢ƒå˜é‡é…ç½®APIå¯†é’¥ï¼ˆå®‰å…¨æœ€ä½³å®è·µï¼‰
      api-key: ${SPRING_AI_OPENAI_API_KEY}
      # DeepSeekçš„APIåœ°å€
      base-url: ${SPRING_AI_OPENAI_BASE_URL}
      chat:
        options:
          # ä½¿ç”¨çš„æ¨¡å‹
          model: ${SPRING_AI_OPENAI_CHAT_MODEL}
          # æ¸©åº¦å‚æ•°ï¼š0.0-2.0ï¼Œè¶Šé«˜è¶Šæœ‰åˆ›é€ æ€§
          temperature: 0.7
```

**é…ç½®è¯´æ˜**ï¼š

- **api-key**: APIå¯†é’¥ï¼Œä»ç¯å¢ƒå˜é‡è¯»å–ï¼ˆå®‰å…¨è€ƒè™‘ï¼‰
- **base-url**: DeepSeekçš„APIåœ°å€ï¼ˆhttps://api.deepseek.comï¼‰
- **model**: æ¨¡å‹åç§°ï¼ˆå¦‚ deepseek-chatï¼‰
- **temperature**: æ§åˆ¶è¾“å‡ºçš„éšæœºæ€§ï¼Œ0=ç¡®å®šæ€§ï¼Œ2=é«˜åº¦åˆ›é€ æ€§

### 5.4 ç¼–å†™å¯åŠ¨ç±»

åˆ›å»º `ChatDeepseekApplication.java`ï¼š

```java
// æ¥è‡ªï¼šchat-deepseek/src/main/java/com/sandy/chat/deepseek/ChatDeepseekApplication.java
package com.sandy.chat.deepseek;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class ChatDeepseekApplication {
    public static void main(String[] args) {
        SpringApplication.run(ChatDeepseekApplication.class, args);
    }
}
```

è¿™æ˜¯æ ‡å‡†çš„Spring Bootå¯åŠ¨ç±»ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚Spring AIä¼šè‡ªåŠ¨æ‰«æå¹¶é…ç½®ã€‚

### 5.5 åˆ›å»ºController

#### 5.5.1 Webé¡µé¢æ§åˆ¶å™¨

åˆ›å»º `WebController.java`ï¼š

```java
// æ¥è‡ªï¼šchat-deepseek/src/main/java/com/sandy/chat/deepseek/WebController.java
package com.sandy.chat.deepseek;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;

@Controller
public class WebController {
    
    @GetMapping("/")
    public String chatPage() {
        return "chat"; // è¿”å›chat.htmlæ¨¡æ¿
    }
}
```

**ä½œç”¨**ï¼šå½“ç”¨æˆ·è®¿é—® `http://localhost:8081/` æ—¶ï¼Œè¿”å›èŠå¤©ç•Œé¢ã€‚

#### 5.5.2 APIæ§åˆ¶å™¨

åˆ›å»º `ChatController.java`ï¼š

```java
// æ¥è‡ªï¼šchat-deepseek/src/main/java/com/sandy/chat/deepseek/ChatController.java
package com.sandy.chat.deepseek;

import org.springframework.ai.openai.OpenAiChatModel;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/api")
public class ChatController {

    private final OpenAiChatModel chatModel;

    @Autowired
    public ChatController(OpenAiChatModel chatModel) {
        // Springè‡ªåŠ¨æ³¨å…¥ChatModelå®ä¾‹
        this.chatModel = chatModel;
    }

    @PostMapping("/chat")
    public MyChatResponse sendMessage(@RequestBody MyChatRequest request) {
        // è°ƒç”¨AIæ¨¡å‹ï¼Œè·å–å›å¤
        String aiResponse = this.chatModel.call(request.getMessage());
        return new MyChatResponse(aiResponse);
    }
}

// è¯·æ±‚DTO
class MyChatRequest {
    private String message;
    
    public String getMessage() {
        return message;
    }
    
    public void setMessage(String message) {
        this.message = message;
    }
}

// å“åº”DTO
class MyChatResponse {
    private String message;
    
    public MyChatResponse(String message) {
        this.message = message;
    }
    
    public String getMessage() {
        return message;
    }
    
    public void setMessage(String message) {
        this.message = message;
    }
}
```

**æ ¸å¿ƒä»£ç è§£æ**ï¼š

1. **ä¾èµ–æ³¨å…¥**ï¼š
   ```java
   private final OpenAiChatModel chatModel;
   ```
   Springè‡ªåŠ¨æ³¨å…¥`OpenAiChatModel`å®ä¾‹ï¼Œæ— éœ€æ‰‹åŠ¨åˆ›å»ºã€‚

2. **è°ƒç”¨AIæ¨¡å‹**ï¼š
   ```java
   String aiResponse = this.chatModel.call(request.getMessage());
   ```
   è¿™ä¸€è¡Œä»£ç å°±å®Œæˆäº†ä¸AIçš„äº¤äº’ï¼Spring AIå¤„ç†äº†æ‰€æœ‰åº•å±‚ç»†èŠ‚ã€‚

3. **RESTful API**ï¼šæä¾› `POST /api/chat` æ¥å£ï¼Œæ¥æ”¶ç”¨æˆ·æ¶ˆæ¯ï¼Œè¿”å›AIå›å¤ã€‚

### 5.6 åˆ›å»ºå‰ç«¯é¡µé¢ï¼ˆç²¾ç®€ç‰ˆï¼‰

åˆ›å»º `src/main/resources/templates/chat.html`ï¼ˆå®Œæ•´ä»£ç è§é¡¹ç›®ï¼‰ï¼š

```html
<!-- æ¥è‡ªï¼šchat-deepseek/src/main/resources/templates/chat.htmlï¼ˆéƒ¨åˆ†ï¼‰ -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Spring AI èŠå¤©åŠ©æ‰‹</title>
    <!-- æ ·å¼ç•¥ -->
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">ğŸ¤– Spring AI èŠå¤©åŠ©æ‰‹</div>
        <div class="chat-messages" id="messages"></div>
        <div class="input-area">
            <textarea id="messageInput" rows="3"></textarea>
            <button onclick="sendMessage()">å‘é€</button>
        </div>
    </div>

    <script>
        async function sendMessage() {
            const message = input.value.trim();
            if (!message) return;
            
            // æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯
            addMessage(message, true);
            
            // è°ƒç”¨åç«¯API
            const response = await fetch('/api/chat', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ message: message })
            });
            
            const data = await response.json();
            // æ˜¾ç¤ºAIå›å¤
            addMessage(data.message, false);
        }
    </script>
</body>
</html>
```

### 5.7 è¿è¡Œåº”ç”¨

#### è®¾ç½®ç¯å¢ƒå˜é‡

**æ–¹å¼1ï¼šä½¿ç”¨IDEï¼ˆæ¨èï¼‰**

åœ¨IntelliJ IDEAä¸­ï¼š
1. æ‰“å¼€ `Run` -> `Edit Configurations`
2. æ·»åŠ ç¯å¢ƒå˜é‡ï¼š
   ```
   SPRING_AI_OPENAI_API_KEY=your-deepseek-api-key
   SPRING_AI_OPENAI_BASE_URL=https://api.deepseek.com
   SPRING_AI_OPENAI_CHAT_MODEL=deepseek-chat
   ```

**æ–¹å¼2ï¼šä½¿ç”¨å‘½ä»¤è¡Œ**

```bash
# Windows PowerShell
$env:SPRING_AI_OPENAI_API_KEY="your-deepseek-api-key"
$env:SPRING_AI_OPENAI_BASE_URL="https://api.deepseek.com"
$env:SPRING_AI_OPENAI_CHAT_MODEL="deepseek-chat"
mvn spring-boot:run

# Linux/Mac
export SPRING_AI_OPENAI_API_KEY=your-deepseek-api-key
export SPRING_AI_OPENAI_BASE_URL=https://api.deepseek.com
export SPRING_AI_OPENAI_CHAT_MODEL=deepseek-chat
mvn spring-boot:run
```

#### å¯åŠ¨åº”ç”¨

```bash
cd chat-deepseek
mvn spring-boot:run
```

çœ‹åˆ°ä»¥ä¸‹æ—¥å¿—è¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼š
```
Started ChatDeepseekApplication in 2.5 seconds
Tomcat started on port(s): 8081 (http)
```

#### æµ‹è¯•åº”ç”¨

1. æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼šhttp://localhost:8081
2. åœ¨è¾“å…¥æ¡†è¾“å…¥æ¶ˆæ¯ï¼Œå¦‚ï¼š"ä½ å¥½ï¼Œä»‹ç»ä¸€ä¸‹Spring AI"
3. ç‚¹å‡»å‘é€ï¼ŒAIä¼šå›å¤ä½ çš„æ¶ˆæ¯ï¼

---

## 6. APIå¯†é’¥é…ç½®ä¸å®‰å…¨

### 6.1 ä¸ºä»€ä¹ˆä¸ç›´æ¥å†™åœ¨ä»£ç é‡Œï¼Ÿ

âŒ **é”™è¯¯ç¤ºä¾‹**ï¼š
```yaml
spring:
  ai:
    openai:
      api-key: sk-1234567890abcdef  # å±é™©ï¼
```

**é—®é¢˜**ï¼š
1. ä»£ç æäº¤åˆ°Gitæ—¶ï¼Œå¯†é’¥ä¼šè¢«æ³„éœ²
2. å›¢é˜Ÿæˆå‘˜å…±äº«åŒä¸€ä¸ªå¯†é’¥
3. æ— æ³•åŒºåˆ†ä¸åŒç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰

### 6.2 æœ€ä½³å®è·µ

#### æ–¹æ³•1ï¼šç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰

```yaml
spring:
  ai:
    openai:
      api-key: ${SPRING_AI_OPENAI_API_KEY}
```

ä¼˜ç‚¹ï¼š
- âœ… å¯†é’¥ä¸è¿›å…¥ä»£ç åº“
- âœ… æ¯ä¸ªç¯å¢ƒç‹¬ç«‹é…ç½®
- âœ… CI/CDå‹å¥½

#### æ–¹æ³•2ï¼šé…ç½®æ–‡ä»¶ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

åˆ›å»º `application-local.yml`ï¼ˆä¸æäº¤åˆ°Gitï¼‰ï¼š

```yaml
spring:
  ai:
    openai:
      api-key: your-local-api-key
```

åœ¨ `.gitignore` ä¸­æ·»åŠ ï¼š
```
application-local.yml
```

### 6.3 å®‰å…¨æ£€æŸ¥æ¸…å•

- [ ] APIå¯†é’¥ä¸å‡ºç°åœ¨ä»£ç ä¸­
- [ ] `.gitignore` åŒ…å«æ•æ„Ÿé…ç½®æ–‡ä»¶
- [ ] ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å¯†é’¥ç®¡ç†æœåŠ¡
- [ ] å®šæœŸè½®æ¢APIå¯†é’¥
- [ ] é™åˆ¶APIå¯†é’¥æƒé™èŒƒå›´
- [ ] ç›‘æ§APIè°ƒç”¨é‡ï¼ŒåŠæ—¶å‘ç°å¼‚å¸¸

---

## 7. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### 7.1 ä¾èµ–å†²çªé—®é¢˜

**é—®é¢˜**ï¼šè¿è¡Œæ—¶æŠ¥é”™ `NoSuchMethodError` æˆ– `ClassNotFoundException`

**è§£å†³æ–¹æ¡ˆ**ï¼š

ä½¿ç”¨`spring-ai-bom`ç»Ÿä¸€ç®¡ç†ç‰ˆæœ¬ï¼š
```xml
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.springframework.ai</groupId>
            <artifactId>spring-ai-bom</artifactId>
            <version>1.0.0</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement>
```

### 7.2 APIè°ƒç”¨å¤±è´¥

**é—®é¢˜**ï¼šæŠ¥é”™ `401 Unauthorized`

| é”™è¯¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| 401 | APIå¯†é’¥é”™è¯¯ | æ£€æŸ¥å¯†é’¥æ˜¯å¦æ­£ç¡®ã€æ˜¯å¦è¿‡æœŸ |
| 429 | è¯·æ±‚è¿‡äºé¢‘ç¹ | å®ç°é™æµæˆ–å‡çº§é…é¢ |
| Timeout | ç½‘ç»œé—®é¢˜ | æ£€æŸ¥ç½‘ç»œã€å¢åŠ è¶…æ—¶æ—¶é—´ |

### 7.3 å“åº”é€Ÿåº¦æ…¢

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š

1. **ä½¿ç”¨æµå¼è¾“å‡º**ï¼ˆä¸‹ä¸€æœŸä¼šè®²ï¼‰
2. **è°ƒæ•´æ¨¡å‹å‚æ•°**ï¼š
   ```yaml
   spring:
     ai:
       openai:
         chat:
           options:
             max-tokens: 500  # é™åˆ¶è¾“å‡ºé•¿åº¦
   ```

---

## ğŸ’» ç¤ºä¾‹ä»£ç 

å®Œæ•´é¡¹ç›®ä»£ç ï¼š[chat-deepseek](../../chat-deepseek/)

**é¡¹ç›®ç»“æ„**ï¼š
```
chat-deepseek/
â”œâ”€â”€ src/main/java/com/sandy/chat/deepseek/
â”‚   â”œâ”€â”€ ChatDeepseekApplication.java    # å¯åŠ¨ç±»
â”‚   â”œâ”€â”€ ChatController.java              # APIæ§åˆ¶å™¨
â”‚   â””â”€â”€ WebController.java               # é¡µé¢æ§åˆ¶å™¨
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ application.yml                  # åº”ç”¨é…ç½®
â”‚   â””â”€â”€ templates/chat.html              # èŠå¤©ç•Œé¢
â””â”€â”€ pom.xml                              # Mavené…ç½®
```

---

## ğŸ¤” æ€è€ƒé¢˜

1. **Spring AIä¸ç›´æ¥è°ƒç”¨OpenAI APIç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ**
   
   æç¤ºï¼šè€ƒè™‘ä¾›åº”å•†é”å®šã€ä»£ç ç»´æŠ¤ã€ä¼ä¸šç‰¹æ€§ç­‰æ–¹é¢ã€‚

2. **å¦‚ä½•åœ¨ä¸æš´éœ²APIå¯†é’¥çš„æƒ…å†µä¸‹è¿›è¡Œä»£ç ç‰ˆæœ¬æ§åˆ¶ï¼Ÿ**
   
   æç¤ºï¼šæ€è€ƒç¯å¢ƒå˜é‡ã€é…ç½®æ–‡ä»¶ã€å¯†é’¥ç®¡ç†æœåŠ¡ç­‰æ–¹æ¡ˆã€‚

3. **ä½ èƒ½æƒ³åˆ°å“ªäº›ä¸šåŠ¡åœºæ™¯å¯ä»¥ç”¨AIå¯¹è¯æ¥è§£å†³ï¼Ÿ**
   
   æç¤ºï¼šå®¢æœã€çŸ¥è¯†åº“é—®ç­”ã€ä»£ç åŠ©æ‰‹ã€å†™ä½œè¾…åŠ©ç­‰ã€‚

---

## ğŸ“– æ‹“å±•é˜…è¯»

- [Spring AIå®˜æ–¹æ–‡æ¡£](https://docs.spring.io/spring-ai/reference/)
- [DeepSeek APIæ–‡æ¡£](https://platform.deepseek.com/docs)
- [Spring Booté…ç½®æ–‡æ¡£](https://docs.spring.io/spring-boot/reference/)
- [Thymeleafæ¨¡æ¿å¼•æ“](https://www.thymeleaf.org/)

---

## â­ï¸ ä¸‹æœŸé¢„å‘Š

æ­å–œä½ å®Œæˆäº†ç¬¬ä¸€ä¸ªSpring AIåº”ç”¨ï¼ğŸ‰

ä¸‹ä¸€æœŸæˆ‘ä»¬å°†å­¦ä¹ **å¤šæ¨¡å‹æ¥å…¥å®æˆ˜**ï¼Œè®©ä½ çš„åº”ç”¨èƒ½å¤Ÿçµæ´»åˆ‡æ¢ä¸åŒçš„AIæœåŠ¡æä¾›å•†ï¼ˆOpenAIã€Azureã€DeepSeekç­‰ï¼‰ï¼Œå®ç°çœŸæ­£çš„ä¾›åº”å•†ä¸­ç«‹ï¼Œé¿å…è¢«é”å®šï¼

**ä¸‹æœŸäº®ç‚¹**ï¼š
- ğŸ”„ ç»Ÿä¸€æ¥å£ï¼Œä¸€é”®åˆ‡æ¢æ¨¡å‹
- ğŸ’° æˆæœ¬ä¼˜åŒ–ç­–ç•¥
- ğŸ¯ æ¨¡å‹é€‰å‹å†³ç­–æ ‘
- ğŸ›¡ï¸ é™çº§å’Œå®¹é”™æ–¹æ¡ˆ

æ•¬è¯·æœŸå¾…ï¼

---

**æ›´æ–°æ—¥æœŸ**ï¼š2025å¹´11æœˆ27æ—¥  
**çŠ¶æ€**ï¼šâœ… å·²å®Œæˆ


